<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nest</title>
    <link rel="stylesheet" href="../assets/css/nest-chat.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700;800;900&display=swap");
    </style>
  </head>
  <body>
    <!-- first profile sectting -->
    <div class="back-setting-profile-div">
      <div class="previous-div">
        <a href="http://127.0.0.1:5500/pages/nest.html">
          <img
            class="previous-div-image"
            src="../assets/images/common/previous.png"
            alt="arrow-back"
          />
        </a>
      </div>

      <div class="first-section-search-bar-member-div">
        <div class="search-container">
          <form>
            <input type="text" placeholder="Search..." />
            <button type="submit">
              <img
                src="../assets/images/chat/search-icon.png"
                alt="search-option-icon"
              />
            </button>
          </form>
        </div>
      </div>

      <div class="profile-user-div">
        <div class="setting-div">
          <img
            class="setting-image"
            src="../assets/images/chat/setting.png"
            alt="user-profile-image"
          />
        </div>
        <div class="profile-div">
          <img
            class="user-profile-image"
            src="../assets/images/chat/user.png"
            alt="setting-control-logo"
          />
        </div>
      </div>
    </div>

    <!-- rolling section -->

    <section class="rolling-section-container">
      <div class="rolling-members-div">
        <div class="trending-bird-div">
          <img
            class="trending-bird-div-image"
            src="../assets/images/chat/Trending-bird.png"
            alt="member-status"
          />
        </div>
      </div>
    </section>

    <!-- chat members and chat box div -->
    <div class="whole-container">
      <!-- inside whole div container div -->

      <div class="inside-whole-container-div">
        <!-- members-div -->
        <div class="member-container">
          <div class="members-div"></div>
        </div>

        <!-- chat box -->

        <div class="chat-box-container">
          <!-- profile-div -->

          <div class="profile-container">
            <div class="user-profile-div">
              <div>
                <img
                  class="user-image"
                  src="../assets/images/still/Snaps/4.jfif"
                  alt="user-image"
                />
              </div>

              <div>
                <p>Jenilia alexander</p>
              </div>
            </div>
            <div class="chat-call-option-div">
              <img
                class="voice-call-image"
                src="../assets/images/chat/Voice call.png"
                alt="voice-call-option"
              />
              <img
                class="video-call-image"
                src="../assets/images/chat/video call.png"
                alt="video-call-option"
              />

              <img
                class="more-option-image"
                src="../assets/images/chat/Three dot.png"
                alt="more-option"
              />
            </div>
          </div>

          <!-- chat showing box -->

          <div class="chat-place-container">
            <div class="chat-place-div">
              <div class="right-side-container"></div>
              <div class="left-side-container"></div>
            </div>
          </div>

          <!-- text area -->

          <div class="text-area-container">
            <div class="emoji-div">
              <img
                class="emoji-image"
                src="../assets/images/chat/add_reaction.svg"
                alt="emoji-option"
              />
            </div>
            <div class="text-div">
              <form id="text-form">
                <input type="text" id="textarea" name="text" />

                <img
                  onclick="chatsend()"
                  id="send-image"
                  src="../assets/images/chat/send-option.png"
                  alt="send-message"
                  value="submit"
                />
              </form>
            </div>
            <div class="chat-option-div">
              <img
                class="file-image"
                src="../assets/images/chat/File-upload.png"
                alt="file-access"
              />

              <img
                class="mike-image"
                src="../assets/images/chat/Mike.png"
                alt="voice-message"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // reel profiles

      const reelProfile = [
        { reelImage: "../assets/images/still/Snaps/1.jfif", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/2.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/3.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/4.jfif", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/5.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/6.png", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/7.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/8.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/1.jfif", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/2.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/3.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/4.jfif", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/5.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/6.png", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/7.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/8.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/1.jfif", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/2.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/3.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/4.jfif", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/5.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/6.png", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/7.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/8.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/1.jfif", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/2.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/3.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/4.jfif", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/5.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/6.png", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/7.jpg", alt: "user-image" },
        { reelImage: "../assets/images/still/Snaps/8.jpg", alt: "user-image" },
      ];

      for (let i = 0; i < reelProfile.length; i++) {
        const trendingBirdDiv = document.createElement("div");
        trendingBirdDiv.setAttribute("class", "trending-bird-div");

        const trendingBirdDivImage = document.createElement("img");
        trendingBirdDivImage.setAttribute("class", "trending-bird-div-image");
        // console.log(reelProfile[i]["reelImage"]);
        trendingBirdDivImage.setAttribute("src", reelProfile[i].reelImage);
        trendingBirdDiv.append(trendingBirdDivImage);

        document.querySelector(".rolling-members-div").append(trendingBirdDiv);
      }
      // chat user chat box JSON details
      const userChatBox = [
        {
          image:
            "https://ca.slack-edge.com/T032648LE-U041S902NTF-f7590b25c46b-512",
          alt: "user-image",
          name: "Amma",
          chat: "How are you mother",
          lastseen: "1 minutes ago",
        },
        {
          image:
            "https://ca.slack-edge.com/T032648LE-U041S902NTF-f7590b25c46b-512",
          alt: "user-image",
          name: "My sister",
          chat: "How are you sis",
          lastseen: "10 minutes ago",
        },
        {
          image:
            "https://ca.slack-edge.com/T032648LE-U041S902NTF-f7590b25c46b-512",
          alt: "user-image",
          name: "Naveena sri",
          chat: "Naina ma enna pantringa",
          lastseen: "1 hour ago",
        },
        {
          image:
            "https://ca.slack-edge.com/T032648LE-U041S902NTF-f7590b25c46b-512",
          alt: "user-image",
          name: "Ramesh machi",
          chat: "Enna pantra machi",
          lastseen: "6 hours ago",
        },
        {
          image:
            "https://ca.slack-edge.com/T032648LE-U041S902NTF-f7590b25c46b-512",
          alt: "user-image",
          name: "Logesh Bharathi",
          chat: "Enna pantra da",
          lastseen: "1 day ago",
        },

        {
          image:
            "https://ca.slack-edge.com/T032648LE-U041S902NTF-f7590b25c46b-512",
          alt: "user-image",
          name: "kamalesh",
          chat: "hiiiii",
          lastseen: "10 day ago",
        },
        {
          image:
            "https://ca.slack-edge.com/T032648LE-U041S902NTF-f7590b25c46b-512",
          alt: "user-image",
          name: "Gowtham",
          chat: " how are you",
          lastseen: "10 day ago",
        },
        {
          image:
            "https://ca.slack-edge.com/T032648LE-U041S902NTF-f7590b25c46b-512",
          alt: "user-image",
          name: "Gowtham",
          chat: " how are you",
          lastseen: "10 day ago",
        },
        {
          image:
            "https://ca.slack-edge.com/T032648LE-U041S902NTF-f7590b25c46b-512",
          alt: "user-image",
          name: "Gowtham",
          chat: " how are you",
          lastseen: "10 day ago",
        },

        {
          image:
            "https://ca.slack-edge.com/T032648LE-U041S902NTF-f7590b25c46b-512",
          alt: "user-image",
          name: "Gowtham",
          chat: " how are you",
          lastseen: "10 day ago",
        },
      ];

      // user chat box div

      for (let i = 0; i < userChatBox.length; i++) {
        // first div
        const div = document.createElement("div");
        div.setAttribute("class", "members");

        // second div

        const image_div = document.createElement("div");
        image_div.setAttribute("class", "image-name");
        // document.querySelector(".members").append(image_div);
        div.append(image_div);

        // third div

        const image = document.createElement("div");
        image.setAttribute("class", "image");
        // document.querySelector(".image-name").append(image);
        image_div.append(image);

        // image attribute

        const img = document.createElement("img");
        img.setAttribute("class", "member-image");
        img.setAttribute("src", userChatBox[i]["image"]);
        // document.querySelector(".image").append(img);
        image.append(img);

        // name div

        const name = document.createElement("div");
        name.setAttribute("class", "name");
        // document.querySelector(".image-name").append(name);
        image_div.append(name);

        // name para attribute

        const para = document.createElement("p");
        para.innerText = userChatBox[i]["name"];
        // document.querySelector(".name").append(para);
        name.append(para);

        // chat para attribute

        const paragraph = document.createElement("p");
        paragraph.innerText = userChatBox[i]["chat"];
        // document.querySelector(".name").append(paragraph);
        name.append(paragraph);

        // Last seen div

        const timeAgo = document.createElement("div");
        timeAgo.setAttribute("id", "time-ago");
        // document.querySelector(".members").append(timeAgo);
        div.append(timeAgo);

        // Last seen paragraph

        const time = document.createElement("p");
        time.innerText = userChatBox[i]["lastseen"];
        // document.querySelector(".time-ago").append(time);
        timeAgo.append(time);

        document.querySelector(".members-div").append(div);
      }

      function chatsend() {
        let arr = [];

        if (localStorage.getItem("senderMessage") != null) {
          arr = JSON.parse(localStorage.getItem("senderMessage"));
        }

        const chat = document.getElementById("textarea").value;

        if (chat === "" || chat === null) {
          return;
        } else {
          const d = new Date();
          console.log(d);
          let jsonTime = (document.getElementById("time-ago").innerHTML =
            d.toLocaleTimeString("en-US", {
              hour: "2-digit",
              minute: "2-digit",
            }));

          let chatObj = {
            chat: chat,
            timing: jsonTime,
            // timing: jsonTime,
          };

          console.log(chatObj);
          arr.push(chatObj);

          const str = JSON.stringify(arr);
          localStorage.setItem("senderMessage", str);
          location.reload();
        }

        // console.log(local);
        // });
      }

      // // send the message fro the chat sender message

      let sender = JSON.parse(localStorage.getItem("senderMessage"));

      console.log(sender);

      for (let i = 0; i < sender.length; i++) {
        const div = document.createElement("div");
        div.setAttribute("class", "reply-msg");

        const replyChatPara = document.createElement("p");
        replyChatPara.setAttribute("id", "reply-msg-chat");
        replyChatPara.innerText = sender[i]["chat"];
        div.append(replyChatPara);

        const replyChatTime = document.createElement("p");
        replyChatTime.setAttribute("class", "reply-msg-time");
        replyChatTime.innerText = sender[i]["timing"];
        div.append(replyChatTime);

        document.querySelector(".right-side-container").append(div);
      }
    </script>
  </body>
</html>
