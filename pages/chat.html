<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fresh Chat</title>
    <link rel="stylesheet" href="../assets/css/chat.css" />
    <script
      src="https://kit.fontawesome.com/a06ff6477a.js"
      crossorigin="anonymous"
    ></script>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="../assets/css/nav-sideBar.css" />
  </head>
  <body>
    <nav>
      <!-- logo image -->
      <div class="logo-div">
        <img
          class="logo-image"
          src="../assets/images/logos/bird-logo.png"
          alt="fresh-nest-logo"
        />
      </div>

      <!-- nav link -->
      <div class="link-container">
        <ul>
          <li>About us</li>
          <li>Features</li>
          <li>Download</li>
          <li>Suport</li>
          <li>Guide</li>
        </ul>
      </div>

      <!-- search bar  and web language-->

      <div class="input-globe-container">
        <div class="form">
          <i class="fa fa-search"></i>
          <input
            type="text"
            class="form-control form-input"
            placeholder="Search anything..."
          />
          <span class="left-pan"><i class="fa-solid fa-feather"></i></span>
        </div>
        <div><i class="fa-sharp fa-solid fa-globe"></i></div>
      </div>
    </nav>

    <div class="side-bar">
      <!-- side profile -->
      <div class="chat-profile-area-container">
        <div class="side-bar-profile-div">
          <img id="user-image" src="" onclick="profile()" alt="" />
        </div>

        <div class="side-bar-control-div">
          <i class="bi bi-house" onclick="home()"></i>
          <i class="fa-solid fa-at" onclick="mention()"></i>
          <i class="fa-solid fa-message" onclick="freshChat()"></i>
          <i class="fa-solid fa-camera" onclick="freshCam()"></i>
          <i class="fa-brands fa-battle-net" onclick="invite()"></i>
          <i class="bi bi-bell" onclick="notification()"></i>
          <i class="bi bi-gear" onclick="setting()"></i>
        </div>

        <div class="log-out-div">
          <i class="bi bi-box-arrow-left" onclick="logOutUser()"></i>
        </div>
      </div>
    </div>
    <link rel="stylesheet" href="../index.html" />

    <!-- chat area -->
    <section class="section-container">
      <div class="chat-member-left-container">
        <div class="chat-inside-member-left-div">
          <!-- search bar -->
          <div></div>

          <!-- reels -->
          <div class="whole-reel-container">
            <!-- Reel and setting -->

            <!-- reel profile -->
            <div class="reel-container"></div>
          </div>

          <!-- chat member area -->

          <!-- message area -->
          <div class="message-member-container">
            <!-- message setting div -->

            <div class="chat-member-container"></div>
          </div>
        </div>
      </div>

      <!-- chat area box -->

      <div class="chat-box-container">
        <div class="chat-box-inside-container">
          <!-- chat profile are -->
          <div class="chat-member-option-div"></div>

          <!-- chat showing message box css -->

          <div class="chat-place-container">
            <div class="chat-place-div">
              <div class="right-side-container"></div>
            </div>
          </div>

          <!-- chat message input container css -->

          <div class="chat-input-option-div"></div>
        </div>
      </div>
    </section>

    <!-- script -->
    <script src="../assets/js/home.js"></script>
    <script src="../node_modules/emoji-picker-element/"></script>
    <script src="../assets/js/chat_static_users.js"></script>
    <script src="../assets/js/chat_input_function.js"></script>
    <script src="../assets/js/user_friend_reel.js"></script>
    <script src="../assets/js/chatAdditional.js"></script>
    <script src="../assets/js/page-direction.js"></script>
    <script src="../node_modules/moment/moment.js"></script>

    <script>
      console.log(moment());
      let sendTime = moment().format("LT");

      let sender = JSON.parse(localStorage.getItem("senderMessage"));
      console.log(sender);

      //

      for (let i = 0; i < chatStaticUser.length; i++) {
        // let findChatToShow = sender.filter(
        //   (send) => send["userId"] == chatStaticUser[i]["userId"]
        // );
        // console.log(findChatToShow);
        // first div
        const div = document.createElement("div");
        div.setAttribute("class", "members");
        div.setAttribute("id", chatStaticUser[i]["userId"]);
        div.setAttribute("onclick", "userSelector(this.id)");

        // second divf

        const image_div = document.createElement("div");
        image_div.setAttribute("class", "image-name");
        div.append(image_div);

        // third div

        const image = document.createElement("div");
        image.setAttribute("class", "image");
        image_div.append(image);

        // image attribute

        const img = document.createElement("img");
        img.setAttribute("class", "member-image");
        img.setAttribute("src", chatStaticUser[i]["user_image"]);
        image.append(img);

        // name div

        const nameOne = document.createElement("div");
        nameOne.setAttribute("class", "name");
        image_div.append(nameOne);

        // name para attribute

        const para = document.createElement("p");
        para.innerHTML = chatStaticUser[i]["user_name"];
        nameOne.append(para);

        // chat para attribute

        const paragraph = document.createElement("p");
        paragraph.innerText = chatStaticUser[i]["chat"];
        nameOne.append(paragraph);

        // Last seen div

        const timeAgo = document.createElement("div");
        timeAgo.setAttribute("id", "time-ago");
        div.append(timeAgo);

        // Last seen paragraph

        const time = document.createElement("p");
        time.innerHTML = chatStaticUser[i]["chat_time"];
        timeAgo.append(time);

        document.querySelector(".chat-member-container").append(div);
      }

      // user reel div creation

      let PresentUserData = JSON.parse(localStorage.getItem("user_data"));

      let allUserData = JSON.parse(localStorage.getItem("register"));

      let findUserData = allUserData.find(
        (ill) => ill["id"] == PresentUserData[0]["id"]
      );

      let reelDiv = document.createElement("div");
      reelDiv.setAttribute("class", "reel-member-div");

      let reelUserImage = document.createElement("img");
      reelUserImage.setAttribute("class", "reel-member-div-image");
      reelUserImage.setAttribute("src", findUserData["avatarUrl"]);
      reelDiv.append(reelUserImage);

      document.querySelector(".reel-container").prepend(reelDiv);
    </script>
  </body>
</html>
